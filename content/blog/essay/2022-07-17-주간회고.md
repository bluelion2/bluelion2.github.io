---
title: '주간회고 07/11 ~ 07/17'
date: 2022-07-17
category: 'essay'
draft: false
---

## 주간회고 07/11 ~ 07/17

### 회사

#### 1. 성능개선을 위한 리팩토링 작업들

번들사이즈를 많이 잡아먹는 몇몇 라이브러리가 보여서 잡는 작업을 진행해보았다.

<div style="text-align: center;">
<img  style="max-width: 600px;" src="https://user-images.githubusercontent.com/34129711/183568297-1af487d7-cfe1-4316-980e-67e74248d907.png" alt="bundle size image" />
</div>

main.js에서 눈에 띄게 큰 `lodash`, `lottie`, `framer-motion`을 먼저 정리해야 할 것 같았다. 셋다 많이 쓰이는 라이브러리지만, 처음 페이지를 로드했을 때 필요성이 없기 떄문이다.

---

lodash의 경우는 import를 수정하면 되는 단순하지만 노가다성 작업을 진행했다. lodash 함수의 전체를 받아 오는 것이 아닌, 필요한 것만 골라 가져오면, 안쓰는 것들은 전체 번들에서 빠지기 때문이다.

```
// before
import _ from 'lodash'

// after
import orderBy  from 'lodash/orderBy'

```

---

lottie와 framer-motion의 경우는 더 쉽게도, 꼭 필요할 경우에만 라이브러리를 import 해와서 사용하는 식으로 수정했다. framer-motion의 경우 현재 스는 2.9에서 5이상으로 라이브러리 버전을 올리면 5 이후부터 지원해주는 `m` 을 이용해서 자동으로 lazy load를 할 수 있다.

```
// before
import { motion } from 'framer-motion'
// after
import { m } from 'framer-motion'
```

---

이러한 작업들을 통해서 번들사이즈를 다시 측정해보니 좋은 결과가 나왔다. 실제 유저의 성능에는 어느정도일지 감이 안잡히지만, 조금이라도 개선이 되면 좋을 것 같다.

<strong>before</strong>

<div style="text-align: center;">
  <img src="https://user-images.githubusercontent.com/34129711/180409584-97b7cb28-8df0-493f-ad19-e3c7cab9452d.png" style="max-width: 600px;" />
  <img style="max-width: 600px;" src="https://user-images.githubusercontent.com/34129711/180409654-5da11982-a0af-4a43-97c3-b6bfcfc440ce.png" />
</div>

<br/>

<strong>after</strong>

<div style="text-align: center;">
  <img src="https://user-images.githubusercontent.com/34129711/180409595-f2cd5ea9-bc64-40ef-a651-37a78e0a582c.png" style="max-width: 600px;" />
  <img style="max-width: 600px;" src="https://user-images.githubusercontent.com/34129711/180409658-18413a53-50b4-4756-8513-db82bf1b05ee.png" />
</div>
