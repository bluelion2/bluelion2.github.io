---
title: '주간회고 04/25 ~ 05/01'
date: 2022-05-01
category: 'essay'
draft: false
---

## 주간회고 04/25 ~ 05/01

### 회사

#### 1. 자동화

회사에서 오래 일하다보니 무뎌졌지만, 자동화에 대한 고민은 계속 하고 있는 상황이었다. 간단히는 branch 상태에 따라서 jira 카드의 상태가 자동으로 바뀐다던지, 배포하면 release 노트가 자동으로 생성 되는 등등 시도해볼만한 것들은 많이 있었다. 스프린트 회고때 자동화에 대해 대한 요구가 있었고 마침 금요일에 시간이 조금 비어서 구상해보았다.

---

우선 디자이너와 작업상태를 공유하기 쉽도록 jira 카드에 작업중인 branch의 배포 상태를 공유하는 것을 시작해보기로 했다.

현재 우리 팀에서는 프론트엔드 배포를 Vercel을 통해서 진행하고 있다. Release와 staging, dev, 각각의 feature 단위별로 push가 일어나면 몇분 뒤 해당 commit별로 deploy를 하고, pr을 요청 하게되면 해당 풀리퀘 밑에 배포주소를 자동으로 comment로 추가해주는 기능이 있다. 이 기능을 이용해서 자동으로 배포된 url을 가지고 와서 jira 카드에 달아준다면 쉽게 공유될 것 이라 판단했다.

---

<div style="text-align:center">
<img style="max-width: 600px;" alt="jira" src="https://user-images.githubusercontent.com/34129711/167281082-4d9e7a5d-403d-4931-9443-fddd929cfa51.png">
</div>

[jira smart values](https://support.atlassian.com/cloud-automation/docs/jira-smart-values-development/) 에는 automation에서 보여줄 수 있도록 몇가지 값을 가지고 올 수 있다. 그 중에서 pull 리퀘스트가 생겼을 때, 해당 github url을 카드에 추가하는 것을 넣었다. 해당 작업을 통해서 pr이 올라가면 github url이 댓글로 추가되고, 그 곳을 통해 Vercel 배포주소가 달린 댓글을 볼 수 있을 것이라 생각했다.

작업을 하다보니, Vercel의 배포주소를 직접 가져와서 더 좋지 않을까? 라는 생각이 들었다. 우선 저 방법대로 하면 작업물을 보기위해 github에 로그인을 하고 들어가는 불필요한 상황이 생기고,github 계정이 추가되어서 비용증가라는 단점이 존재핬다.

---

vercel 링크를 달아주는 작업을 하다가 문득 생각이 들었다. `trigger를 어디서 달아야 하지...?`

jira automation에서는 현재 pull requestd의 댓글이 달리거나 수정되는 것에 대해 캐치하는 기능은 없다. 또한 vercel도 마찬가지로 webhook을 실행시킬 고정 branch를 미리 등록해야 한다. feature별로 브랜치명이 다르기 때문에 이 두 방법을 쓸 수는 없다. 게다가 Vercel의 빌드는 push를 하자마자 바로 받을 수 없는 문제도 있다.

마지막으로 드는 방법은 aws lambda를 이용하는 방법이었다.

<div style="text-align:center">
<img style="max-width: 600px;"  alt="구상도" src="https://user-images.githubusercontent.com/34129711/167281004-bebc3402-5564-4832-b8be-98ce4438228a.png">
</div>

PR이 올라가면 automation에서 lambda에 필요한 정보(인증정보 및 기타 정보) 를 넘기고 lambda에서 특정시간 뒤(Ex : 5분) github pr정보를 보고 vercel deploy된 주소를 가지고 와서 jira로 다시 넘겨주는 방법이다.

다만 이렇게 하면 너무 복잡하고 사이즈가 커보여서, 이 정도 까지 해야하나 싶다. 좀 더 자동으로 지원해주는 기능이 있는지 문서를 찾아보고 정말 없으면 그 때 시도해봐야겠다.

---

#### 2. 성과급

드디어 회사에서 성과급이 나왔다. 기존에는 뭐 없다가 이번에 5% 정도 받았는데, 그래도 뭐라도 더 받으니 좋다. 이 돈으로 뭐 살까 고민을 하다가, 내 맥북이 없어서 하나 장만했다. 온라인으로 시키면 1달 가까이 걸려서, 명동 애플스토어도 새로 생겼겠다 한번 구경갔다왔다. 교육할인을 받긴 했지만, 역시 맥북은 비싸다.... ㅠ

---

### 일상

#### 1. 10년 뒤에는

얼마전, 10년 뒤에는 어떤 사람이 되었을 지에 대한 질문을 받았었다. 그 때는 딱히 큰 고민이 없어서 “물 장사 하지 않을까요?” 답을 했었다. 그러다 성과급도 나오고 해서 현재 재정 상태에 대해서 점검을 하던 중, 10년 뒤에는 무엇을 할 지 깊게 생각해보게 되었다.

하나 떠오르는 것은 개발자를 대상으로 하는 사업을 해보면 좋지 않을까라는 생각이 들었다. 작은 카페 겸 오프라인 미팅 장소에 며칠 쉬었다 갈 수 있도록 게스트 하우스를 운영해보면 좋을 것 같은 생각이 들었다. 이런 사업아이템을 소개하는 페이지를 하나 만들어 본다면 재미있을거 같아서 기획부터 시작했다.
