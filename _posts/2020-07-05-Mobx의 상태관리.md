---
layout: post
title: "Mobx의 useLocalStore와 useAsObservable"
subtitle: "Mobx의 Observable value 체크"
categories: devlog
tags: exp
comments: true
---

 사내 프론트엔드의 상태관리는 Mobx로 하고 있다. Redux에 비해서 간결하고, 쓰기 쉽다는 장점 때문에 도입하게 되었지만,
막상 써보니 예상치 못한 에러가 나고, 공식 문서 외에 최근 볼만한 글들이 없어서 사실상 삽질하면서 일을 하고 있다.
그 중, 한가지 이슈에 대해 공유하고자 이 글을 쓴다.

---

- [이슈 정리 요약](https://github.com/bluelion2/Project-issue-repo/issues/21)
이슈 정리를 간단히 요약해보았다. 부모 컴포넌트의 computed한 값을 자식 컴포넌트의 Props로 내려줄 때, 당연히 자식컴포넌트에서 계속 
변경되는 값을 가지고 있을거라 생각했는데, 그렇지 않았던 문제였다. 흑마법을 너무 맹신한 잘못이었다.

---

공식문서 상에서는 외부에서 상태 변경을 하게되면 감지하는 방법이 2가지 있다.

- [useLocalStore](https://mobx-react.js.org/state-local#non-observable-dependencies)
공식문서를 보면, 두번쨰 인자에 값을 주어서, 해당 값이 바뀌면 감지하도록 하는 방법이 있었다.

```jsx
const useLocalStore = ((observableProps) => ({
    text: observableProps.text
}), props)
```

- [상태 아웃소싱](https://mobx-react.js.org/state-outsourcing)
useAsObservableSource()에 값을 넣어서 값을 관찰하게 한다.

```jsx
const observableValue = useAsObservableSource(props)
```

---

결론적으로는 부모의 값이 바뀐다 해서 자식에게까지 전파가 되지 않기 때문에, 자식 컴포넌트에서 값이 바뀌는지를 체킹할 필요가 있다.
Mobx 라이브러리의 useLocalStore를 까보고 있는데, 좀 더 이해하고 난 뒤 글을 추가하도록 하겠다.

